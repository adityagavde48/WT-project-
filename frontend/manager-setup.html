<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Project Manager Setup</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bootstrap -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <!-- Custom CSS -->
  <link rel="stylesheet" href="manager-setup.css" />
</head>
<body>
  <div class="page-wrapper">
    <div class="card-main">
      <div class="glow-orb"></div>

      <!-- Header -->
      <div class="d-flex justify-content-between align-items-center mb-3">
        <div>
          <h2 class="page-title mb-1">Project Manager Setup</h2>
          <p class="text-muted small mb-0">
            Review project, add team, assign tasks.
          </p>
        </div>
        <span class="step-pill" id="stepLabel">Step 1 of 2</span>
      </div>

      <!-- Step indicator -->
      <div class="stepper mb-4">
        <div class="step-item active" id="step1Indicator">
          <div class="circle">1</div>
          <span>Review Project</span>
        </div>
        <div class="step-line"></div>
        <div class="step-item" id="step2Indicator">
          <div class="circle">2</div>
          <span>Team & Tasks</span>
        </div>
      </div>

      <!-- Alerts -->
      <div id="alertContainer"></div>

      <!-- STEP 1: REVIEW PROJECT -->
      <div id="step1" class="step-panel active">
        <h5 class="section-title">Project Details</h5>

        <div class="mb-3">
          <label class="form-label text-muted small mb-1">Title</label>
          <p class="form-static" id="projectTitleDisplay">Loading...</p>
        </div>

        <div class="mb-3">
          <label class="form-label text-muted small mb-1">Description</label>
          <p class="form-static" id="projectDescriptionDisplay">
            Loading...
          </p>
        </div>

        <div class="mb-3">
          <label class="form-label text-muted small mb-1">Requirement File</label>
          <div>
            <a
              id="projectFileLink"
              href="#"
              class="btn btn-sm btn-outline-light rounded-pill"
              target="_blank"
              rel="noopener"
            >
              Download Requirement PDF
            </a>
          </div>
        </div>

        <div class="d-flex justify-content-end mt-4">
          <button id="goToStep2Btn" class="btn btn-primary-gradient">
            Next: Team & Tasks ➜
          </button>
        </div>
      </div>

      <!-- STEP 2: TEAM & TASKS -->
      <div id="step2" class="step-panel">
        <h5 class="section-title">Team & Tasks</h5>

        <!-- Project Title fixed -->
        <div class="mb-3">
          <label class="form-label text-muted small mb-1">Project Title</label>
          <p class="form-static" id="projectTitleFixed">—</p>
          <p class="text-muted small mb-0">
            Title is decided by the owner and cannot be changed.
          </p>
        </div>

        <!-- Add team members -->
        <div class="mb-3">
          <label class="form-label">Add Team Member (by email)</label>
          <div class="input-group mb-2">
            <input
              type="email"
              id="memberEmailInput"
              class="form-control"
              placeholder="Enter member email"
            />
            <button class="btn btn-outline-light" id="addMemberBtn">
              Add
            </button>
          </div>
          <p class="text-muted small mb-1">
            First member added becomes <strong>Scrum Master</strong>, others are
            <strong>Team Members</strong>.
          </p>
        </div>

        <!-- Team members list -->
        <div class="mb-3">
          <label class="form-label text-muted small mb-1">Current Team</label>
          <ul class="list-group small" id="teamList">
            <!-- Filled by JS -->
          </ul>
        </div>

        <!-- Project deadline -->
        <div class="mb-3">
          <label class="form-label">Project Deadline (optional)</label>
          <input
            type="date"
            id="projectDeadlineInput"
            class="form-control"
          />
        </div>

        <!-- Add tasks -->
        <hr class="soft-divider" />

        <h6 class="mb-2">Tasks</h6>
        <p class="text-muted small">
          Add tasks and assign them to team members.
        </p>

        <div class="row g-2 align-items-end mb-3">
          <div class="col-md-3">
            <label class="form-label small">Task Title</label>
            <input
              type="text"
              id="taskTitleInput"
              class="form-control"
              placeholder="e.g. Setup backend"
            />
          </div>
          <div class="col-md-3">
            <label class="form-label small">Description</label>
            <input
              type="text"
              id="taskDescriptionInput"
              class="form-control"
              placeholder="Short description"
            />
          </div>
          <div class="col-md-3">
            <label class="form-label small">Assign To</label>
            <select id="taskAssigneeInput" class="form-select">
              <option value="">Select member</option>
            </select>
          </div>
          <div class="col-md-2">
            <label class="form-label small">Deadline</label>
            <input
              type="date"
              id="taskDeadlineInput"
              class="form-control"
            />
          </div>
          <div class="col-md-1 d-grid">
            <button class="btn btn-outline-light btn-sm" id="addTaskBtn">
              +
            </button>
          </div>
        </div>

        <!-- Tasks list -->
        <div class="mb-3">
          <label class="form-label text-muted small mb-1">Task List</label>
          <div class="table-responsive">
            <table class="table table-sm table-dark align-middle mb-0" id="tasksTable">
              <thead>
              <tr>
                <th>#</th>
                <th>Task</th>
                <th>Assigned To</th>
                <th>Deadline</th>
                <th></th>
              </tr>
              </thead>
              <tbody>
              <!-- Filled by JS -->
              </tbody>
            </table>
          </div>
        </div>

        <!-- Footer buttons -->
        <div class="d-flex justify-content-between align-items-center mt-4">
          <button class="btn btn-outline-light btn-sm" id="backToStep1Btn">
            ◀ Back
          </button>

          <button class="btn btn-primary-gradient" id="submitSetupBtn">
            Submit & Notify Team ✔
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
  ></script>

  <!-- Custom JS -->
  <script src="manager-setup.js"></script>
</body>
</html>
